<!-- title-start -->
### Кастомные меню с добавлением в любую встройку Битрикс24
<!-- title-start -->

<!-- main-start -->

**Кейс**: _вывести произвольный список ссылок на разделы, приложения crm_

![](https://zahalski.dev/images/modules/keis03/001.png)

## 1. Создадим встройку-группу для наших будущих пунктов меню

![](https://zahalski.dev/images/modules/keis03/002.png)

| Опция               | Значение                     |
|---------------------|------------------------------|
| Что встраиваем      | Приложение                   |
| Куда встраиваем     | Битрикс24                    |
| Место встройки      | Список встроек               |
| Название встройки   | Задаем произвольное название |

**Название** будет выводиться в списке всех встроек для админа или пользователя, 
например `бухгалтерия`

## 2. Добавим пункты меню на внешнее приложения

Можно использовать любые ссылки, приложением будет предпринята попытка 
открытия пути через [BX24.openPath](https://dev.1c-bitrix.ru/rest_help/js_library/additional/openPath.php) и в случае успеха 
страница будет открыта в слайдере, иначе (если нет поддержки) покажется окно перехода на внешний ресурс.

### 2.1. Создаем пункт меню

| Опция               | Значение                           |
|---------------------|------------------------------------|
| Что встраиваем      | Стороннее приложение               |
| Куда встраиваем     | Битрикс24                          |
| Место встройки      | Ссылка на приложение с параметрами |
| Название встройки   | Задаем произвольное название       |

**Название** будет использоваться по умолчанию, как название пункта меню, 
например `остатки на счетах`

### 2.2. Настраиваем пункт меню

Ищем нашу встройку с названием `остатки на счетах` в списке и переходим в настройки

![](https://zahalski.dev/images/modules/keis03/003.png)

| Опция                                        | Значение                                                                                                                                                                                                                                                |
|----------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Показывать в главном меню                    | Показ в главной сетке, <br/>скрываем т.к. будет использоваться в подменю                                                                                                                                                                                |
| Ссылка на встройку с параметрами приложения  | В нашем случае остатки это список в смарт процессе <br/>и ссылка вида: /crm/type/190/list/category/0/<br/> обратите внимание, что ссылка задачется через идентификатор и путь crm/type<br/> (это особьенности обработки открытия слайдером в битрикс24) |
| Пользователи                                 | Можно ограничить видимость пункта по пользователям                                                                                                                                                                                                      |
| Описание встройки для админа                 | Любой произвольный текст для списка в админке (чтобы понять к чему относится встройка)                                                                                                                                                                  |
| Название встройки для пользователей в списке | Можно изменить название пункта меню для пользователей по умолчанию                                                                                                                                                                                      |
| Описание встройки для пользователей в списке | дополнительный текст под названием в пункте меню                                                                                                                                                                                                        |
| Ссылка на изображение иконки                 | Ссылка на иконку                                                                                                                                                                                                                                        |
| Цвет фона пункта меню (HEX)                  | Фон пункта меню                                                                                                                                                                                                                                         |

Опции: Название встройки, Описание встройки, Ссылка на изображение, Цвет фона - могут быть изменены пользователем самостоятельно в настройках грида (страницы вывода пунктов меню)

Также у пользователя будет возможность менять сортировку и видимость данных пунктов (поэтому настройка прав доступа не обязательна)
Ссылки открываются от лица текущего пользователя и если у пользователя нет доступа к данным, то и после открытия он не увидит данных на данной странице

![](https://zahalski.dev/images/modules/keis03/004.png)

### 2.3. Повторяем действия из пункта 2 на остальные пункты меню

** В основную встройку пунктов меню может быть выведена любая другая доступная встройка (см. пункт 3) 
с приложения (нет необходимости создавать ссылку на внешнее приложение если необходим грид с данного приложения уже настроенный ранее)

## 3. Добавляем пункты меню в наше основное меню

Ищем встройку с названием `бухгалтерия` и переходим в ее настройки + выбираем наши пункты меню (название опции: встройки доступные внутри встройки)

![](https://zahalski.dev/images/modules/keis03/005.png)

При необходимости можно изменить другие параметры, как в пункте 2 инструкции

## 4. Добавляем встройку в Битрикс24 (вывод ссылки в главном меню)

### 4.1. Переходим в параметры встройки

Ищем встройку с названием `бухгалтерия` и переходим в ее настройки

### 4.2. Регистрируем обработчик

Опция: Добавить встройку данного пункта меню в Битрикс24

![](https://zahalski.dev/images/modules/keis03/006.png)

Обновляем страницу несколько раз (кеш), пока пункт меню не появится в приложениях 
и меняем сортировку пункта стандартно для интерфейса Битрикс24

## 5. Готово. 

Дальше можно нажать на шестеренку и настроить вид встройки индивидуально под себя, поменять сортировку или разукрасить пункты меню.

Данные настройки уже индивидуальны для каждого пользователя.

![](https://zahalski.dev/images/modules/keis03/007.png)

<!-- main-end -->